{"ast":null,"code":"var _jsxFileName = \"/Users/mac/react/gooroo-coding-test/bigas-library-client/src/display/containers/mybooks/mybooks/operations/BookOperationsContainer.js\";\nimport React, { Suspense, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Notifications, { notify } from 'react-notify-toast';\nimport './BookOperationsContainer.scss';\nimport bigasLogo from '../../../../../assets/images/general/logo.png';\nimport { CATEGORIES } from '../../../../../utils/Variables';\nimport { SET_INITIAL_FORM_DETAILS, SET_FORM_DETAILS, RESET_FORM } from '../../../../../store/actions/MyBooksActions';\nimport { getBookDetail, createBook, editBookDetails } from '../../../../../services/Books';\n\nconst BookOperationsContainer = props => {\n  console.log(\"BookOperationsContainer props => \", props);\n  const bookID = props.match.params.id ? props.match.params.id : null;\n  const mode = bookID == null ? \"add\" : \"edit\";\n  const buttonText = mode === \"add\" ? \"Add Book\" : \"Save Changes\";\n  const form = useSelector(state => state.mybook.form);\n  let {\n    title,\n    author,\n    publisher,\n    categoryID\n  } = form;\n  const dispatch = useDispatch();\n  console.log(\"categoryID => \", categoryID);\n  let categoryIndex = -1;\n\n  if (categoryID !== \"\") {\n    for (let i = 0; i < CATEGORIES.length; i++) {\n      if (CATEGORIES[i].categoryID === categoryID) {\n        categoryIndex = i;\n        break;\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (mode === \"edit\") {\n      console.log(\"IN EDIT MODE\");\n\n      const setInitFormDetails = data => dispatch({\n        type: SET_INITIAL_FORM_DETAILS,\n        data\n      });\n\n      getBookDetail(bookID).then(res => {\n        const data = {\n          title: res.data.title,\n          author: res.data.author,\n          publisher: res.data.publisher,\n          categoryID: res.data.categoryID\n        };\n        setInitFormDetails(data);\n      });\n    }\n  }, []);\n\n  const submitBookDetailHandler = e => {\n    e.preventDefault();\n    const data = { ...form,\n      image: null\n    };\n\n    if (mode === \"add\") {\n      createBook(data).then(res => {\n        if (res.code == 200) {\n          notify.show(\"Book successfully added to your collection!\", 'success', 1000);\n        } else {\n          notify.show(\"An error has occured, please try again later!\", 'error', 1000);\n        }\n\n        dispatch({\n          type: RESET_FORM\n        });\n        setTimeout(() => props.history.replace('/my-books'), 1000);\n      });\n    } else {\n      editBookDetails(bookID, data).then(res => {\n        if (res.code == 200) {\n          notify.show(\"Book successfully editted!\", 'success', 1000);\n        } else {\n          notify.show(\"An error has occured, please try again later!\", 'error', 1000);\n        }\n\n        dispatch({\n          type: RESET_FORM\n        });\n        setTimeout(() => props.history.replace('/my-books'), 1000);\n      });\n    }\n  };\n\n  return React.createElement(Suspense, {\n    fallback: React.createElement(\"div\", {\n      className: \"lds-ring mt-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"book-operations-container d-flex flex-column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"image-section d-flex flex-column align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"category-image text-center d-flex align-items-center justify-content-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: categoryID !== \"\" ? CATEGORIES[categoryIndex].categoryImage : bigasLogo,\n    alt: \"category-image\",\n    height: \"80px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-section flex-grow-1 d-flex flex-column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(Notifications, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"w-100 form-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    autoComplete: \"off\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    className: \"biggerFont colorDefault titleSection d-inline-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Book Details\"), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-xl-4 col-lg-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"smallFont greyMedium text-uppercase\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"TITLE\"), React.createElement(\"input\", {\n    value: title,\n    name: \"title\",\n    type: \"text\",\n    onChange: e => dispatch({\n      type: SET_FORM_DETAILS,\n      e\n    }),\n    className: \"form-control custom-form\",\n    placeholder: \"Enter Book Title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-xl-4 col-lg-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"smallFont greyMedium text-uppercase\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"AUTHOR\"), React.createElement(\"input\", {\n    value: author,\n    name: \"author\",\n    type: \"text\",\n    onChange: e => dispatch({\n      type: SET_FORM_DETAILS,\n      e\n    }),\n    className: \"form-control custom-form\",\n    placeholder: \"Enter Author Name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-xl-4 col-lg-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"smallFont greyMedium text-uppercase\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"PUBLISHER\"), React.createElement(\"input\", {\n    value: publisher,\n    name: \"publisher\",\n    type: \"text\",\n    onChange: e => dispatch({\n      type: SET_FORM_DETAILS,\n      e\n    }),\n    className: \"form-control custom-form\",\n    placeholder: \"Enter Publisher Name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-xl-4 col-lg-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"smallFont greyMedium text-uppercase\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"CATEGORY\"), React.createElement(\"select\", {\n    name: \"categoryID\",\n    value: categoryID,\n    className: \"form-control custom-form\",\n    onChange: e => dispatch({\n      type: SET_FORM_DETAILS,\n      e\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, \"Select Category\"), CATEGORIES.map((category, index) => {\n    return React.createElement(\"option\", {\n      key: index,\n      value: category.categoryID,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, category.categoryName);\n  })))))), React.createElement(\"div\", {\n    className: \"mt-auto text-right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    disabled: title === '' || author === '' || publisher === '' || categoryID === '' ? true : false,\n    onClick: e => submitBookDetailHandler(e),\n    className: \"buttonRounded d-inline-block px-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, buttonText)))));\n};\n\nexport default BookOperationsContainer;","map":{"version":3,"sources":["/Users/mac/react/gooroo-coding-test/bigas-library-client/src/display/containers/mybooks/mybooks/operations/BookOperationsContainer.js"],"names":["React","Suspense","useEffect","useSelector","useDispatch","Notifications","notify","bigasLogo","CATEGORIES","SET_INITIAL_FORM_DETAILS","SET_FORM_DETAILS","RESET_FORM","getBookDetail","createBook","editBookDetails","BookOperationsContainer","props","console","log","bookID","match","params","id","mode","buttonText","form","state","mybook","title","author","publisher","categoryID","dispatch","categoryIndex","i","length","setInitFormDetails","data","type","then","res","submitBookDetailHandler","e","preventDefault","image","code","show","setTimeout","history","replace","categoryImage","map","category","index","categoryName"],"mappings":"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","sourcesContent":["\nimport React, { Suspense, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Notifications, { notify } from 'react-notify-toast';\n\nimport './BookOperationsContainer.scss';\nimport bigasLogo from '../../../../../assets/images/general/logo.png';\n\nimport { CATEGORIES } from '../../../../../utils/Variables';\nimport { SET_INITIAL_FORM_DETAILS, SET_FORM_DETAILS, RESET_FORM } from '../../../../../store/actions/MyBooksActions'\nimport { getBookDetail, createBook, editBookDetails } from '../../../../../services/Books';\n\nconst BookOperationsContainer = props => {\n\n    console.log(\"BookOperationsContainer props => \", props);\n\n    const bookID = props.match.params.id ? props.match.params.id : null;\n    const mode = (bookID == null) ? \"add\" : \"edit\";\n    const buttonText = (mode === \"add\") ? \"Add Book\" : \"Save Changes\"\n\n    const form = useSelector(state => state.mybook.form)\n    let { title, author, publisher, categoryID } = form;\n    const dispatch = useDispatch()\n\n    console.log(\"categoryID => \", categoryID);\n\n    let categoryIndex = -1;\n    if (categoryID !== \"\") {\n        for (let i = 0; i < CATEGORIES.length; i++) {\n            if (CATEGORIES[i].categoryID === categoryID) {\n                categoryIndex = i;\n                break;\n            }\n        }\n    }\n\n    useEffect(() => {\n        if (mode === \"edit\") {\n            console.log(\"IN EDIT MODE\");\n            const setInitFormDetails = (data) => dispatch({ type: SET_INITIAL_FORM_DETAILS, data })\n            getBookDetail(bookID)\n                .then(res => {\n                    const data = {\n                        title: res.data.title,\n                        author: res.data.author,\n                        publisher: res.data.publisher,\n                        categoryID: res.data.categoryID\n                    }\n                    setInitFormDetails(data)\n                });\n        }\n    }, []);\n\n    const submitBookDetailHandler = (e) => {\n        e.preventDefault()\n\n        const data = {\n            ...form,\n            image: null\n        }\n\n        if (mode === \"add\") {\n            createBook(data).then(res => {\n                if (res.code == 200) {\n                    notify.show(\"Book successfully added to your collection!\", 'success', 1000)\n                }\n                else {\n                    notify.show(\"An error has occured, please try again later!\", 'error', 1000)\n                }\n                dispatch({ type: RESET_FORM })\n                setTimeout(() => props.history.replace('/my-books'), 1000)\n            })\n        }\n        else {\n            editBookDetails(bookID, data).then(res => {\n                if (res.code == 200) {\n                    notify.show(\"Book successfully editted!\", 'success', 1000)\n                }\n                else {\n                    notify.show(\"An error has occured, please try again later!\", 'error', 1000)\n                }\n                dispatch({ type: RESET_FORM })\n                setTimeout(() => props.history.replace('/my-books'), 1000)\n            })\n        }\n\n    }\n\n    return (\n        <Suspense fallback={<div className=\"lds-ring mt-2\"><div></div><div></div><div></div><div></div></div>}>\n            <div className=\"book-operations-container d-flex flex-column\">\n                <div className=\"image-section d-flex flex-column align-items-center\">\n                    <div className=\"category-image text-center d-flex align-items-center justify-content-center\">\n                        <img\n                            src={categoryID !== \"\" ? CATEGORIES[categoryIndex].categoryImage : bigasLogo}\n                            alt={\"category-image\"}\n                            height=\"80px\" />\n                    </div>\n                </div>\n                <div className=\"form-section flex-grow-1 d-flex flex-column\">\n                    <Notifications />\n                    <div className=\"w-100 form-content\">\n                        <form autoComplete=\"off\">\n                            <h4 className=\"biggerFont colorDefault titleSection d-inline-block\">Book Details</h4>\n                            <div className=\"row\">\n                                <div className=\"col-xl-4 col-lg-6\">\n                                    <h5 className=\"smallFont greyMedium text-uppercase\">TITLE</h5>\n                                    <input value={title} name=\"title\" type=\"text\" onChange={(e) => dispatch({ type: SET_FORM_DETAILS, e })} className=\"form-control custom-form\" placeholder=\"Enter Book Title\" />\n                                </div>\n                                <div className=\"col-xl-4 col-lg-6\">\n                                    <h5 className=\"smallFont greyMedium text-uppercase\">AUTHOR</h5>\n                                    <input value={author} name=\"author\" type=\"text\" onChange={(e) => dispatch({ type: SET_FORM_DETAILS, e })} className=\"form-control custom-form\" placeholder=\"Enter Author Name\" />\n                                </div>\n                                <div className=\"col-xl-4 col-lg-6\">\n                                    <h5 className=\"smallFont greyMedium text-uppercase\">PUBLISHER</h5>\n                                    <input value={publisher} name=\"publisher\" type=\"text\" onChange={(e) => dispatch({ type: SET_FORM_DETAILS, e })} className=\"form-control custom-form\" placeholder=\"Enter Publisher Name\" />\n                                </div>\n                                <div className=\"col-xl-4 col-lg-6\">\n                                    <h5 className=\"smallFont greyMedium text-uppercase\">CATEGORY</h5>\n                                    <select name=\"categoryID\" value={categoryID} className=\"form-control custom-form\" onChange={(e) => dispatch({ type: SET_FORM_DETAILS, e })}>\n                                        <option value={\"\"}>Select Category</option>\n                                        {CATEGORIES.map((category, index) => {\n                                            return (\n                                                <option key={index} value={category.categoryID}>{category.categoryName}</option>\n                                            )\n                                        })}\n                                    </select>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div className=\"mt-auto text-right\">\n                        <button disabled={\n                            ((\n                                title === '' ||\n                                author === '' ||\n                                publisher === '' ||\n                                categoryID === ''\n                            ) ? true : false)\n                        }\n                            onClick={(e) => submitBookDetailHandler(e)}\n                            className=\"buttonRounded d-inline-block px-4\">{buttonText}</button>\n                    </div>\n                </div>\n            </div>\n        </Suspense>\n    )\n}\nexport default BookOperationsContainer"]},"metadata":{},"sourceType":"module"}
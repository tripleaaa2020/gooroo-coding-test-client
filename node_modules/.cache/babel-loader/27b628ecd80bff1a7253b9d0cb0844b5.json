{"ast":null,"code":"(function () {\n  var AjaxMonitor,\n      Bar,\n      DocumentMonitor,\n      ElementMonitor,\n      ElementTracker,\n      EventLagMonitor,\n      Evented,\n      Events,\n      NoTargetError,\n      Pace,\n      RequestIntercept,\n      SOURCE_KEYS,\n      Scaler,\n      SocketRequestTracker,\n      XHRRequestTracker,\n      animation,\n      avgAmplitude,\n      bar,\n      cancelAnimation,\n      cancelAnimationFrame,\n      defaultOptions,\n      extend,\n      extendNative,\n      getFromDOM,\n      getIntercept,\n      handlePushState,\n      ignoreStack,\n      init,\n      now,\n      options,\n      requestAnimationFrame,\n      result,\n      runAnimation,\n      scalers,\n      shouldIgnoreURL,\n      shouldTrack,\n      source,\n      sources,\n      uniScaler,\n      _WebSocket,\n      _XDomainRequest,\n      _XMLHttpRequest,\n      _i,\n      _intercept,\n      _len,\n      _pushState,\n      _ref,\n      _ref1,\n      _replaceState,\n      __slice = [].slice,\n      __hasProp = {}.hasOwnProperty,\n      __extends = function (child, parent) {\n    for (var key in parent) {\n      if (__hasProp.call(parent, key)) child[key] = parent[key];\n    }\n\n    function ctor() {\n      this.constructor = child;\n    }\n\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  },\n      __indexOf = [].indexOf || function (item) {\n    for (var i = 0, l = this.length; i < l; i++) {\n      if (i in this && this[i] === item) return i;\n    }\n\n    return -1;\n  };\n\n  defaultOptions = {\n    catchupTime: 100,\n    initialRate: .03,\n    minTime: 250,\n    ghostTime: 100,\n    maxProgressPerFrame: 20,\n    easeFactor: 1.25,\n    startOnPageLoad: true,\n    restartOnPushState: true,\n    restartOnRequestAfter: 500,\n    target: 'body',\n    elements: {\n      checkInterval: 100,\n      selectors: ['body']\n    },\n    eventLag: {\n      minSamples: 10,\n      sampleCount: 3,\n      lagThreshold: 3\n    },\n    ajax: {\n      trackMethods: ['GET'],\n      trackWebSockets: true,\n      ignoreURLs: []\n    }\n  };\n\n  now = function () {\n    var _ref;\n\n    return (_ref = typeof performance !== \"undefined\" && performance !== null ? typeof performance.now === \"function\" ? performance.now() : void 0 : void 0) != null ? _ref : +new Date();\n  };\n\n  requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n  cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\n\n  if (requestAnimationFrame == null) {\n    requestAnimationFrame = function (fn) {\n      return setTimeout(fn, 50);\n    };\n\n    cancelAnimationFrame = function (id) {\n      return clearTimeout(id);\n    };\n  }\n\n  runAnimation = function (fn) {\n    var last, tick;\n    last = now();\n\n    tick = function () {\n      var diff;\n      diff = now() - last;\n\n      if (diff >= 33) {\n        last = now();\n        return fn(diff, function () {\n          return requestAnimationFrame(tick);\n        });\n      } else {\n        return setTimeout(tick, 33 - diff);\n      }\n    };\n\n    return tick();\n  };\n\n  result = function () {\n    var args, key, obj;\n    obj = arguments[0], key = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];\n\n    if (typeof obj[key] === 'function') {\n      return obj[key].apply(obj, args);\n    } else {\n      return obj[key];\n    }\n  };\n\n  extend = function () {\n    var key, out, source, sources, val, _i, _len;\n\n    out = arguments[0], sources = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\n    for (_i = 0, _len = sources.length; _i < _len; _i++) {\n      source = sources[_i];\n\n      if (source) {\n        for (key in source) {\n          if (!__hasProp.call(source, key)) continue;\n          val = source[key];\n\n          if (out[key] != null && typeof out[key] === 'object' && val != null && typeof val === 'object') {\n            extend(out[key], val);\n          } else {\n            out[key] = val;\n          }\n        }\n      }\n    }\n\n    return out;\n  };\n\n  avgAmplitude = function (arr) {\n    var count, sum, v, _i, _len;\n\n    sum = count = 0;\n\n    for (_i = 0, _len = arr.length; _i < _len; _i++) {\n      v = arr[_i];\n      sum += Math.abs(v);\n      count++;\n    }\n\n    return sum / count;\n  };\n\n  getFromDOM = function (key, json) {\n    var data, e, el;\n\n    if (key == null) {\n      key = 'options';\n    }\n\n    if (json == null) {\n      json = true;\n    }\n\n    el = document.querySelector(\"[data-pace-\" + key + \"]\");\n\n    if (!el) {\n      return;\n    }\n\n    data = el.getAttribute(\"data-pace-\" + key);\n\n    if (!json) {\n      return data;\n    }\n\n    try {\n      return JSON.parse(data);\n    } catch (_error) {\n      e = _error;\n      return typeof console !== \"undefined\" && console !== null ? console.error(\"Error parsing inline pace options\", e) : void 0;\n    }\n  };\n\n  Evented = function () {\n    function Evented() {}\n\n    Evented.prototype.on = function (event, handler, ctx, once) {\n      var _base;\n\n      if (once == null) {\n        once = false;\n      }\n\n      if (this.bindings == null) {\n        this.bindings = {};\n      }\n\n      if ((_base = this.bindings)[event] == null) {\n        _base[event] = [];\n      }\n\n      return this.bindings[event].push({\n        handler: handler,\n        ctx: ctx,\n        once: once\n      });\n    };\n\n    Evented.prototype.once = function (event, handler, ctx) {\n      return this.on(event, handler, ctx, true);\n    };\n\n    Evented.prototype.off = function (event, handler) {\n      var i, _ref, _results;\n\n      if (((_ref = this.bindings) != null ? _ref[event] : void 0) == null) {\n        return;\n      }\n\n      if (handler == null) {\n        return delete this.bindings[event];\n      } else {\n        i = 0;\n        _results = [];\n\n        while (i < this.bindings[event].length) {\n          if (this.bindings[event][i].handler === handler) {\n            _results.push(this.bindings[event].splice(i, 1));\n          } else {\n            _results.push(i++);\n          }\n        }\n\n        return _results;\n      }\n    };\n\n    Evented.prototype.trigger = function () {\n      var args, ctx, event, handler, i, once, _ref, _ref1, _results;\n\n      event = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\n      if ((_ref = this.bindings) != null ? _ref[event] : void 0) {\n        i = 0;\n        _results = [];\n\n        while (i < this.bindings[event].length) {\n          _ref1 = this.bindings[event][i], handler = _ref1.handler, ctx = _ref1.ctx, once = _ref1.once;\n          handler.apply(ctx != null ? ctx : this, args);\n\n          if (once) {\n            _results.push(this.bindings[event].splice(i, 1));\n          } else {\n            _results.push(i++);\n          }\n        }\n\n        return _results;\n      }\n    };\n\n    return Evented;\n  }();\n\n  Pace = window.Pace || {};\n  window.Pace = Pace;\n  extend(Pace, Evented.prototype);\n  options = Pace.options = extend({}, defaultOptions, window.paceOptions, getFromDOM());\n  _ref = ['ajax', 'document', 'eventLag', 'elements'];\n\n  for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n    source = _ref[_i];\n\n    if (options[source] === true) {\n      options[source] = defaultOptions[source];\n    }\n  }\n\n  NoTargetError = function (_super) {\n    __extends(NoTargetError, _super);\n\n    function NoTargetError() {\n      _ref1 = NoTargetError.__super__.constructor.apply(this, arguments);\n      return _ref1;\n    }\n\n    return NoTargetError;\n  }(Error);\n\n  Bar = function () {\n    function Bar() {\n      this.progress = 0;\n    }\n\n    Bar.prototype.getElement = function () {\n      var targetElement;\n\n      if (this.el == null) {\n        targetElement = document.querySelector(options.target);\n\n        if (!targetElement) {\n          throw new NoTargetError();\n        }\n\n        this.el = document.createElement('div');\n        this.el.className = \"pace pace-active\";\n        document.body.className = document.body.className.replace(/pace-done/g, '');\n        document.body.className += ' pace-running';\n        this.el.innerHTML = '<div class=\"pace-progress\">\\n  <div class=\"pace-progress-inner\"></div>\\n</div>\\n<div class=\"pace-activity\"></div>';\n\n        if (targetElement.firstChild != null) {\n          targetElement.insertBefore(this.el, targetElement.firstChild);\n        } else {\n          targetElement.appendChild(this.el);\n        }\n      }\n\n      return this.el;\n    };\n\n    Bar.prototype.finish = function () {\n      var el;\n      el = this.getElement();\n      el.className = el.className.replace('pace-active', '');\n      el.className += ' pace-inactive';\n      document.body.className = document.body.className.replace('pace-running', '');\n      return document.body.className += ' pace-done';\n    };\n\n    Bar.prototype.update = function (prog) {\n      this.progress = prog;\n      return this.render();\n    };\n\n    Bar.prototype.destroy = function () {\n      try {\n        this.getElement().parentNode.removeChild(this.getElement());\n      } catch (_error) {\n        NoTargetError = _error;\n      }\n\n      return this.el = void 0;\n    };\n\n    Bar.prototype.render = function () {\n      var el, key, progressStr, transform, _j, _len1, _ref2;\n\n      if (document.querySelector(options.target) == null) {\n        return false;\n      }\n\n      el = this.getElement();\n      transform = \"translate3d(\" + this.progress + \"%, 0, 0)\";\n      _ref2 = ['webkitTransform', 'msTransform', 'transform'];\n\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n        key = _ref2[_j];\n        el.children[0].style[key] = transform;\n      }\n\n      if (!this.lastRenderedProgress || this.lastRenderedProgress | 0 !== this.progress | 0) {\n        el.children[0].setAttribute('data-progress-text', \"\" + (this.progress | 0) + \"%\");\n\n        if (this.progress >= 100) {\n          progressStr = '99';\n        } else {\n          progressStr = this.progress < 10 ? \"0\" : \"\";\n          progressStr += this.progress | 0;\n        }\n\n        el.children[0].setAttribute('data-progress', \"\" + progressStr);\n      }\n\n      return this.lastRenderedProgress = this.progress;\n    };\n\n    Bar.prototype.done = function () {\n      return this.progress >= 100;\n    };\n\n    return Bar;\n  }();\n\n  Events = function () {\n    function Events() {\n      this.bindings = {};\n    }\n\n    Events.prototype.trigger = function (name, val) {\n      var binding, _j, _len1, _ref2, _results;\n\n      if (this.bindings[name] != null) {\n        _ref2 = this.bindings[name];\n        _results = [];\n\n        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n          binding = _ref2[_j];\n\n          _results.push(binding.call(this, val));\n        }\n\n        return _results;\n      }\n    };\n\n    Events.prototype.on = function (name, fn) {\n      var _base;\n\n      if ((_base = this.bindings)[name] == null) {\n        _base[name] = [];\n      }\n\n      return this.bindings[name].push(fn);\n    };\n\n    return Events;\n  }();\n\n  _XMLHttpRequest = window.XMLHttpRequest;\n  _XDomainRequest = window.XDomainRequest;\n  _WebSocket = window.WebSocket;\n\n  extendNative = function (to, from) {\n    var e, key, _results;\n\n    _results = [];\n\n    for (key in from.prototype) {\n      try {\n        if (to[key] == null && typeof from[key] !== 'function') {\n          if (typeof Object.defineProperty === 'function') {\n            _results.push(Object.defineProperty(to, key, {\n              get: function () {\n                return from.prototype[key];\n              },\n              configurable: true,\n              enumerable: true\n            }));\n          } else {\n            _results.push(to[key] = from.prototype[key]);\n          }\n        } else {\n          _results.push(void 0);\n        }\n      } catch (_error) {\n        e = _error;\n      }\n    }\n\n    return _results;\n  };\n\n  ignoreStack = [];\n\n  Pace.ignore = function () {\n    var args, fn, ret;\n    fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    ignoreStack.unshift('ignore');\n    ret = fn.apply(null, args);\n    ignoreStack.shift();\n    return ret;\n  };\n\n  Pace.track = function () {\n    var args, fn, ret;\n    fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    ignoreStack.unshift('track');\n    ret = fn.apply(null, args);\n    ignoreStack.shift();\n    return ret;\n  };\n\n  shouldTrack = function (method) {\n    var _ref2;\n\n    if (method == null) {\n      method = 'GET';\n    }\n\n    if (ignoreStack[0] === 'track') {\n      return 'force';\n    }\n\n    if (!ignoreStack.length && options.ajax) {\n      if (method === 'socket' && options.ajax.trackWebSockets) {\n        return true;\n      } else if (_ref2 = method.toUpperCase(), __indexOf.call(options.ajax.trackMethods, _ref2) >= 0) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  RequestIntercept = function (_super) {\n    __extends(RequestIntercept, _super);\n\n    function RequestIntercept() {\n      var monitorXHR,\n          _this = this;\n\n      RequestIntercept.__super__.constructor.apply(this, arguments);\n\n      monitorXHR = function (req) {\n        var _open;\n\n        _open = req.open;\n        return req.open = function (type, url, async) {\n          if (shouldTrack(type)) {\n            _this.trigger('request', {\n              type: type,\n              url: url,\n              request: req\n            });\n          }\n\n          return _open.apply(req, arguments);\n        };\n      };\n\n      window.XMLHttpRequest = function (flags) {\n        var req;\n        req = new _XMLHttpRequest(flags);\n        monitorXHR(req);\n        return req;\n      };\n\n      try {\n        extendNative(window.XMLHttpRequest, _XMLHttpRequest);\n      } catch (_error) {}\n\n      if (_XDomainRequest != null) {\n        window.XDomainRequest = function () {\n          var req;\n          req = new _XDomainRequest();\n          monitorXHR(req);\n          return req;\n        };\n\n        try {\n          extendNative(window.XDomainRequest, _XDomainRequest);\n        } catch (_error) {}\n      }\n\n      if (_WebSocket != null && options.ajax.trackWebSockets) {\n        window.WebSocket = function (url, protocols) {\n          var req;\n\n          if (protocols != null) {\n            req = new _WebSocket(url, protocols);\n          } else {\n            req = new _WebSocket(url);\n          }\n\n          if (shouldTrack('socket')) {\n            _this.trigger('request', {\n              type: 'socket',\n              url: url,\n              protocols: protocols,\n              request: req\n            });\n          }\n\n          return req;\n        };\n\n        try {\n          extendNative(window.WebSocket, _WebSocket);\n        } catch (_error) {}\n      }\n    }\n\n    return RequestIntercept;\n  }(Events);\n\n  _intercept = null;\n\n  getIntercept = function () {\n    if (_intercept == null) {\n      _intercept = new RequestIntercept();\n    }\n\n    return _intercept;\n  };\n\n  shouldIgnoreURL = function (url) {\n    var pattern, _j, _len1, _ref2;\n\n    _ref2 = options.ajax.ignoreURLs;\n\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n      pattern = _ref2[_j];\n\n      if (typeof pattern === 'string') {\n        if (url.indexOf(pattern) !== -1) {\n          return true;\n        }\n      } else {\n        if (pattern.test(url)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  getIntercept().on('request', function (_arg) {\n    var after, args, request, type, url;\n    type = _arg.type, request = _arg.request, url = _arg.url;\n\n    if (shouldIgnoreURL(url)) {\n      return;\n    }\n\n    if (!Pace.running && (options.restartOnRequestAfter !== false || shouldTrack(type) === 'force')) {\n      args = arguments;\n      after = options.restartOnRequestAfter || 0;\n\n      if (typeof after === 'boolean') {\n        after = 0;\n      }\n\n      return setTimeout(function () {\n        var stillActive, _j, _len1, _ref2, _ref3, _results;\n\n        if (type === 'socket') {\n          stillActive = request.readyState < 2;\n        } else {\n          stillActive = 0 < (_ref2 = request.readyState) && _ref2 < 4;\n        }\n\n        if (stillActive) {\n          Pace.restart();\n          _ref3 = Pace.sources;\n          _results = [];\n\n          for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n            source = _ref3[_j];\n\n            if (source instanceof AjaxMonitor) {\n              source.watch.apply(source, args);\n              break;\n            } else {\n              _results.push(void 0);\n            }\n          }\n\n          return _results;\n        }\n      }, after);\n    }\n  });\n\n  AjaxMonitor = function () {\n    function AjaxMonitor() {\n      var _this = this;\n\n      this.elements = [];\n      getIntercept().on('request', function () {\n        return _this.watch.apply(_this, arguments);\n      });\n    }\n\n    AjaxMonitor.prototype.watch = function (_arg) {\n      var request, tracker, type, url;\n      type = _arg.type, request = _arg.request, url = _arg.url;\n\n      if (shouldIgnoreURL(url)) {\n        return;\n      }\n\n      if (type === 'socket') {\n        tracker = new SocketRequestTracker(request);\n      } else {\n        tracker = new XHRRequestTracker(request);\n      }\n\n      return this.elements.push(tracker);\n    };\n\n    return AjaxMonitor;\n  }();\n\n  XHRRequestTracker = function () {\n    function XHRRequestTracker(request) {\n      var event,\n          size,\n          _j,\n          _len1,\n          _onreadystatechange,\n          _ref2,\n          _this = this;\n\n      this.progress = 0;\n\n      if (window.ProgressEvent != null) {\n        size = null;\n        request.addEventListener('progress', function (evt) {\n          if (evt.lengthComputable) {\n            return _this.progress = 100 * evt.loaded / evt.total;\n          } else {\n            return _this.progress = _this.progress + (100 - _this.progress) / 2;\n          }\n        }, false);\n        _ref2 = ['load', 'abort', 'timeout', 'error'];\n\n        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n          event = _ref2[_j];\n          request.addEventListener(event, function () {\n            return _this.progress = 100;\n          }, false);\n        }\n      } else {\n        _onreadystatechange = request.onreadystatechange;\n\n        request.onreadystatechange = function () {\n          var _ref3;\n\n          if ((_ref3 = request.readyState) === 0 || _ref3 === 4) {\n            _this.progress = 100;\n          } else if (request.readyState === 3) {\n            _this.progress = 50;\n          }\n\n          return typeof _onreadystatechange === \"function\" ? _onreadystatechange.apply(null, arguments) : void 0;\n        };\n      }\n    }\n\n    return XHRRequestTracker;\n  }();\n\n  SocketRequestTracker = function () {\n    function SocketRequestTracker(request) {\n      var event,\n          _j,\n          _len1,\n          _ref2,\n          _this = this;\n\n      this.progress = 0;\n      _ref2 = ['error', 'open'];\n\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n        event = _ref2[_j];\n        request.addEventListener(event, function () {\n          return _this.progress = 100;\n        }, false);\n      }\n    }\n\n    return SocketRequestTracker;\n  }();\n\n  ElementMonitor = function () {\n    function ElementMonitor(options) {\n      var selector, _j, _len1, _ref2;\n\n      if (options == null) {\n        options = {};\n      }\n\n      this.elements = [];\n\n      if (options.selectors == null) {\n        options.selectors = [];\n      }\n\n      _ref2 = options.selectors;\n\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n        selector = _ref2[_j];\n        this.elements.push(new ElementTracker(selector));\n      }\n    }\n\n    return ElementMonitor;\n  }();\n\n  ElementTracker = function () {\n    function ElementTracker(selector) {\n      this.selector = selector;\n      this.progress = 0;\n      this.check();\n    }\n\n    ElementTracker.prototype.check = function () {\n      var _this = this;\n\n      if (document.querySelector(this.selector)) {\n        return this.done();\n      } else {\n        return setTimeout(function () {\n          return _this.check();\n        }, options.elements.checkInterval);\n      }\n    };\n\n    ElementTracker.prototype.done = function () {\n      return this.progress = 100;\n    };\n\n    return ElementTracker;\n  }();\n\n  DocumentMonitor = function () {\n    DocumentMonitor.prototype.states = {\n      loading: 0,\n      interactive: 50,\n      complete: 100\n    };\n\n    function DocumentMonitor() {\n      var _onreadystatechange,\n          _ref2,\n          _this = this;\n\n      this.progress = (_ref2 = this.states[document.readyState]) != null ? _ref2 : 100;\n      _onreadystatechange = document.onreadystatechange;\n\n      document.onreadystatechange = function () {\n        if (_this.states[document.readyState] != null) {\n          _this.progress = _this.states[document.readyState];\n        }\n\n        return typeof _onreadystatechange === \"function\" ? _onreadystatechange.apply(null, arguments) : void 0;\n      };\n    }\n\n    return DocumentMonitor;\n  }();\n\n  EventLagMonitor = function () {\n    function EventLagMonitor() {\n      var avg,\n          interval,\n          last,\n          points,\n          samples,\n          _this = this;\n\n      this.progress = 0;\n      avg = 0;\n      samples = [];\n      points = 0;\n      last = now();\n      interval = setInterval(function () {\n        var diff;\n        diff = now() - last - 50;\n        last = now();\n        samples.push(diff);\n\n        if (samples.length > options.eventLag.sampleCount) {\n          samples.shift();\n        }\n\n        avg = avgAmplitude(samples);\n\n        if (++points >= options.eventLag.minSamples && avg < options.eventLag.lagThreshold) {\n          _this.progress = 100;\n          return clearInterval(interval);\n        } else {\n          return _this.progress = 100 * (3 / (avg + 3));\n        }\n      }, 50);\n    }\n\n    return EventLagMonitor;\n  }();\n\n  Scaler = function () {\n    function Scaler(source) {\n      this.source = source;\n      this.last = this.sinceLastUpdate = 0;\n      this.rate = options.initialRate;\n      this.catchup = 0;\n      this.progress = this.lastProgress = 0;\n\n      if (this.source != null) {\n        this.progress = result(this.source, 'progress');\n      }\n    }\n\n    Scaler.prototype.tick = function (frameTime, val) {\n      var scaling;\n\n      if (val == null) {\n        val = result(this.source, 'progress');\n      }\n\n      if (val >= 100) {\n        this.done = true;\n      }\n\n      if (val === this.last) {\n        this.sinceLastUpdate += frameTime;\n      } else {\n        if (this.sinceLastUpdate) {\n          this.rate = (val - this.last) / this.sinceLastUpdate;\n        }\n\n        this.catchup = (val - this.progress) / options.catchupTime;\n        this.sinceLastUpdate = 0;\n        this.last = val;\n      }\n\n      if (val > this.progress) {\n        this.progress += this.catchup * frameTime;\n      }\n\n      scaling = 1 - Math.pow(this.progress / 100, options.easeFactor);\n      this.progress += scaling * this.rate * frameTime;\n      this.progress = Math.min(this.lastProgress + options.maxProgressPerFrame, this.progress);\n      this.progress = Math.max(0, this.progress);\n      this.progress = Math.min(100, this.progress);\n      this.lastProgress = this.progress;\n      return this.progress;\n    };\n\n    return Scaler;\n  }();\n\n  sources = null;\n  scalers = null;\n  bar = null;\n  uniScaler = null;\n  animation = null;\n  cancelAnimation = null;\n  Pace.running = false;\n\n  handlePushState = function () {\n    if (options.restartOnPushState) {\n      return Pace.restart();\n    }\n  };\n\n  if (window.history.pushState != null) {\n    _pushState = window.history.pushState;\n\n    window.history.pushState = function () {\n      handlePushState();\n      return _pushState.apply(window.history, arguments);\n    };\n  }\n\n  if (window.history.replaceState != null) {\n    _replaceState = window.history.replaceState;\n\n    window.history.replaceState = function () {\n      handlePushState();\n      return _replaceState.apply(window.history, arguments);\n    };\n  }\n\n  SOURCE_KEYS = {\n    ajax: AjaxMonitor,\n    elements: ElementMonitor,\n    document: DocumentMonitor,\n    eventLag: EventLagMonitor\n  };\n  (init = function () {\n    var type, _j, _k, _len1, _len2, _ref2, _ref3, _ref4;\n\n    Pace.sources = sources = [];\n    _ref2 = ['ajax', 'elements', 'document', 'eventLag'];\n\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n      type = _ref2[_j];\n\n      if (options[type] !== false) {\n        sources.push(new SOURCE_KEYS[type](options[type]));\n      }\n    }\n\n    _ref4 = (_ref3 = options.extraSources) != null ? _ref3 : [];\n\n    for (_k = 0, _len2 = _ref4.length; _k < _len2; _k++) {\n      source = _ref4[_k];\n      sources.push(new source(options));\n    }\n\n    Pace.bar = bar = new Bar();\n    scalers = [];\n    return uniScaler = new Scaler();\n  })();\n\n  Pace.stop = function () {\n    Pace.trigger('stop');\n    Pace.running = false;\n    bar.destroy();\n    cancelAnimation = true;\n\n    if (animation != null) {\n      if (typeof cancelAnimationFrame === \"function\") {\n        cancelAnimationFrame(animation);\n      }\n\n      animation = null;\n    }\n\n    return init();\n  };\n\n  Pace.restart = function () {\n    Pace.trigger('restart');\n    Pace.stop();\n    return Pace.start();\n  };\n\n  Pace.go = function () {\n    var start;\n    Pace.running = true;\n    bar.render();\n    start = now();\n    cancelAnimation = false;\n    return animation = runAnimation(function (frameTime, enqueueNextFrame) {\n      var avg, count, done, element, elements, i, j, remaining, scaler, scalerList, sum, _j, _k, _len1, _len2, _ref2;\n\n      remaining = 100 - bar.progress;\n      count = sum = 0;\n      done = true;\n\n      for (i = _j = 0, _len1 = sources.length; _j < _len1; i = ++_j) {\n        source = sources[i];\n        scalerList = scalers[i] != null ? scalers[i] : scalers[i] = [];\n        elements = (_ref2 = source.elements) != null ? _ref2 : [source];\n\n        for (j = _k = 0, _len2 = elements.length; _k < _len2; j = ++_k) {\n          element = elements[j];\n          scaler = scalerList[j] != null ? scalerList[j] : scalerList[j] = new Scaler(element);\n          done &= scaler.done;\n\n          if (scaler.done) {\n            continue;\n          }\n\n          count++;\n          sum += scaler.tick(frameTime);\n        }\n      }\n\n      avg = sum / count;\n      bar.update(uniScaler.tick(frameTime, avg));\n\n      if (bar.done() || done || cancelAnimation) {\n        bar.update(100);\n        Pace.trigger('done');\n        return setTimeout(function () {\n          bar.finish();\n          Pace.running = false;\n          return Pace.trigger('hide');\n        }, Math.max(options.ghostTime, Math.max(options.minTime - (now() - start), 0)));\n      } else {\n        return enqueueNextFrame();\n      }\n    });\n  };\n\n  Pace.start = function (_options) {\n    extend(options, _options);\n    Pace.running = true;\n\n    try {\n      bar.render();\n    } catch (_error) {\n      NoTargetError = _error;\n    }\n\n    if (!document.querySelector('.pace')) {\n      return setTimeout(Pace.start, 50);\n    } else {\n      Pace.trigger('start');\n      return Pace.go();\n    }\n  };\n\n  if (typeof define === 'function' && define.amd) {\n    define(['pace'], function () {\n      return Pace;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = Pace;\n  } else {\n    if (options.startOnPageLoad) {\n      Pace.start();\n    }\n  }\n}).call(this);","map":{"version":3,"sources":["/Users/mac/react/gooroo-coding-test/bigas-library-client/node_modules/pace-js/pace.js"],"names":["AjaxMonitor","Bar","DocumentMonitor","ElementMonitor","ElementTracker","EventLagMonitor","Evented","Events","NoTargetError","Pace","RequestIntercept","SOURCE_KEYS","Scaler","SocketRequestTracker","XHRRequestTracker","animation","avgAmplitude","bar","cancelAnimation","cancelAnimationFrame","defaultOptions","extend","extendNative","getFromDOM","getIntercept","handlePushState","ignoreStack","init","now","options","requestAnimationFrame","result","runAnimation","scalers","shouldIgnoreURL","shouldTrack","source","sources","uniScaler","_WebSocket","_XDomainRequest","_XMLHttpRequest","_i","_intercept","_len","_pushState","_ref","_ref1","_replaceState","__slice","slice","__hasProp","hasOwnProperty","__extends","child","parent","key","call","ctor","constructor","prototype","__super__","__indexOf","indexOf","item","i","l","length","catchupTime","initialRate","minTime","ghostTime","maxProgressPerFrame","easeFactor","startOnPageLoad","restartOnPushState","restartOnRequestAfter","target","elements","checkInterval","selectors","eventLag","minSamples","sampleCount","lagThreshold","ajax","trackMethods","trackWebSockets","ignoreURLs","performance","Date","window","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","mozCancelAnimationFrame","fn","setTimeout","id","clearTimeout","last","tick","diff","args","obj","arguments","apply","out","val","arr","count","sum","v","Math","abs","json","data","e","el","document","querySelector","getAttribute","JSON","parse","_error","console","error","on","event","handler","ctx","once","_base","bindings","push","off","_results","splice","trigger","paceOptions","_super","Error","progress","getElement","targetElement","createElement","className","body","replace","innerHTML","firstChild","insertBefore","appendChild","finish","update","prog","render","destroy","parentNode","removeChild","progressStr","transform","_j","_len1","_ref2","children","style","lastRenderedProgress","setAttribute","done","name","binding","XMLHttpRequest","XDomainRequest","WebSocket","to","from","Object","defineProperty","get","configurable","enumerable","ignore","ret","unshift","shift","track","method","toUpperCase","monitorXHR","_this","req","_open","open","type","url","async","request","flags","protocols","pattern","test","_arg","after","running","stillActive","_ref3","readyState","restart","watch","tracker","size","_onreadystatechange","ProgressEvent","addEventListener","evt","lengthComputable","loaded","total","onreadystatechange","selector","check","states","loading","interactive","complete","avg","interval","points","samples","setInterval","clearInterval","sinceLastUpdate","rate","catchup","lastProgress","frameTime","scaling","pow","min","max","history","pushState","replaceState","_k","_len2","_ref4","extraSources","stop","start","go","enqueueNextFrame","element","j","remaining","scaler","scalerList","_options","define","amd","exports","module"],"mappings":"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","sourcesContent":["(function() {\n  var AjaxMonitor, Bar, DocumentMonitor, ElementMonitor, ElementTracker, EventLagMonitor, Evented, Events, NoTargetError, Pace, RequestIntercept, SOURCE_KEYS, Scaler, SocketRequestTracker, XHRRequestTracker, animation, avgAmplitude, bar, cancelAnimation, cancelAnimationFrame, defaultOptions, extend, extendNative, getFromDOM, getIntercept, handlePushState, ignoreStack, init, now, options, requestAnimationFrame, result, runAnimation, scalers, shouldIgnoreURL, shouldTrack, source, sources, uniScaler, _WebSocket, _XDomainRequest, _XMLHttpRequest, _i, _intercept, _len, _pushState, _ref, _ref1, _replaceState,\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  defaultOptions = {\n    catchupTime: 100,\n    initialRate: .03,\n    minTime: 250,\n    ghostTime: 100,\n    maxProgressPerFrame: 20,\n    easeFactor: 1.25,\n    startOnPageLoad: true,\n    restartOnPushState: true,\n    restartOnRequestAfter: 500,\n    target: 'body',\n    elements: {\n      checkInterval: 100,\n      selectors: ['body']\n    },\n    eventLag: {\n      minSamples: 10,\n      sampleCount: 3,\n      lagThreshold: 3\n    },\n    ajax: {\n      trackMethods: ['GET'],\n      trackWebSockets: true,\n      ignoreURLs: []\n    }\n  };\n\n  now = function() {\n    var _ref;\n    return (_ref = typeof performance !== \"undefined\" && performance !== null ? typeof performance.now === \"function\" ? performance.now() : void 0 : void 0) != null ? _ref : +(new Date);\n  };\n\n  requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n\n  cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\n\n  if (requestAnimationFrame == null) {\n    requestAnimationFrame = function(fn) {\n      return setTimeout(fn, 50);\n    };\n    cancelAnimationFrame = function(id) {\n      return clearTimeout(id);\n    };\n  }\n\n  runAnimation = function(fn) {\n    var last, tick;\n    last = now();\n    tick = function() {\n      var diff;\n      diff = now() - last;\n      if (diff >= 33) {\n        last = now();\n        return fn(diff, function() {\n          return requestAnimationFrame(tick);\n        });\n      } else {\n        return setTimeout(tick, 33 - diff);\n      }\n    };\n    return tick();\n  };\n\n  result = function() {\n    var args, key, obj;\n    obj = arguments[0], key = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];\n    if (typeof obj[key] === 'function') {\n      return obj[key].apply(obj, args);\n    } else {\n      return obj[key];\n    }\n  };\n\n  extend = function() {\n    var key, out, source, sources, val, _i, _len;\n    out = arguments[0], sources = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    for (_i = 0, _len = sources.length; _i < _len; _i++) {\n      source = sources[_i];\n      if (source) {\n        for (key in source) {\n          if (!__hasProp.call(source, key)) continue;\n          val = source[key];\n          if ((out[key] != null) && typeof out[key] === 'object' && (val != null) && typeof val === 'object') {\n            extend(out[key], val);\n          } else {\n            out[key] = val;\n          }\n        }\n      }\n    }\n    return out;\n  };\n\n  avgAmplitude = function(arr) {\n    var count, sum, v, _i, _len;\n    sum = count = 0;\n    for (_i = 0, _len = arr.length; _i < _len; _i++) {\n      v = arr[_i];\n      sum += Math.abs(v);\n      count++;\n    }\n    return sum / count;\n  };\n\n  getFromDOM = function(key, json) {\n    var data, e, el;\n    if (key == null) {\n      key = 'options';\n    }\n    if (json == null) {\n      json = true;\n    }\n    el = document.querySelector(\"[data-pace-\" + key + \"]\");\n    if (!el) {\n      return;\n    }\n    data = el.getAttribute(\"data-pace-\" + key);\n    if (!json) {\n      return data;\n    }\n    try {\n      return JSON.parse(data);\n    } catch (_error) {\n      e = _error;\n      return typeof console !== \"undefined\" && console !== null ? console.error(\"Error parsing inline pace options\", e) : void 0;\n    }\n  };\n\n  Evented = (function() {\n    function Evented() {}\n\n    Evented.prototype.on = function(event, handler, ctx, once) {\n      var _base;\n      if (once == null) {\n        once = false;\n      }\n      if (this.bindings == null) {\n        this.bindings = {};\n      }\n      if ((_base = this.bindings)[event] == null) {\n        _base[event] = [];\n      }\n      return this.bindings[event].push({\n        handler: handler,\n        ctx: ctx,\n        once: once\n      });\n    };\n\n    Evented.prototype.once = function(event, handler, ctx) {\n      return this.on(event, handler, ctx, true);\n    };\n\n    Evented.prototype.off = function(event, handler) {\n      var i, _ref, _results;\n      if (((_ref = this.bindings) != null ? _ref[event] : void 0) == null) {\n        return;\n      }\n      if (handler == null) {\n        return delete this.bindings[event];\n      } else {\n        i = 0;\n        _results = [];\n        while (i < this.bindings[event].length) {\n          if (this.bindings[event][i].handler === handler) {\n            _results.push(this.bindings[event].splice(i, 1));\n          } else {\n            _results.push(i++);\n          }\n        }\n        return _results;\n      }\n    };\n\n    Evented.prototype.trigger = function() {\n      var args, ctx, event, handler, i, once, _ref, _ref1, _results;\n      event = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if ((_ref = this.bindings) != null ? _ref[event] : void 0) {\n        i = 0;\n        _results = [];\n        while (i < this.bindings[event].length) {\n          _ref1 = this.bindings[event][i], handler = _ref1.handler, ctx = _ref1.ctx, once = _ref1.once;\n          handler.apply(ctx != null ? ctx : this, args);\n          if (once) {\n            _results.push(this.bindings[event].splice(i, 1));\n          } else {\n            _results.push(i++);\n          }\n        }\n        return _results;\n      }\n    };\n\n    return Evented;\n\n  })();\n\n  Pace = window.Pace || {};\n\n  window.Pace = Pace;\n\n  extend(Pace, Evented.prototype);\n\n  options = Pace.options = extend({}, defaultOptions, window.paceOptions, getFromDOM());\n\n  _ref = ['ajax', 'document', 'eventLag', 'elements'];\n  for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n    source = _ref[_i];\n    if (options[source] === true) {\n      options[source] = defaultOptions[source];\n    }\n  }\n\n  NoTargetError = (function(_super) {\n    __extends(NoTargetError, _super);\n\n    function NoTargetError() {\n      _ref1 = NoTargetError.__super__.constructor.apply(this, arguments);\n      return _ref1;\n    }\n\n    return NoTargetError;\n\n  })(Error);\n\n  Bar = (function() {\n    function Bar() {\n      this.progress = 0;\n    }\n\n    Bar.prototype.getElement = function() {\n      var targetElement;\n      if (this.el == null) {\n        targetElement = document.querySelector(options.target);\n        if (!targetElement) {\n          throw new NoTargetError;\n        }\n        this.el = document.createElement('div');\n        this.el.className = \"pace pace-active\";\n        document.body.className = document.body.className.replace(/pace-done/g, '');\n        document.body.className += ' pace-running';\n        this.el.innerHTML = '<div class=\"pace-progress\">\\n  <div class=\"pace-progress-inner\"></div>\\n</div>\\n<div class=\"pace-activity\"></div>';\n        if (targetElement.firstChild != null) {\n          targetElement.insertBefore(this.el, targetElement.firstChild);\n        } else {\n          targetElement.appendChild(this.el);\n        }\n      }\n      return this.el;\n    };\n\n    Bar.prototype.finish = function() {\n      var el;\n      el = this.getElement();\n      el.className = el.className.replace('pace-active', '');\n      el.className += ' pace-inactive';\n      document.body.className = document.body.className.replace('pace-running', '');\n      return document.body.className += ' pace-done';\n    };\n\n    Bar.prototype.update = function(prog) {\n      this.progress = prog;\n      return this.render();\n    };\n\n    Bar.prototype.destroy = function() {\n      try {\n        this.getElement().parentNode.removeChild(this.getElement());\n      } catch (_error) {\n        NoTargetError = _error;\n      }\n      return this.el = void 0;\n    };\n\n    Bar.prototype.render = function() {\n      var el, key, progressStr, transform, _j, _len1, _ref2;\n      if (document.querySelector(options.target) == null) {\n        return false;\n      }\n      el = this.getElement();\n      transform = \"translate3d(\" + this.progress + \"%, 0, 0)\";\n      _ref2 = ['webkitTransform', 'msTransform', 'transform'];\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n        key = _ref2[_j];\n        el.children[0].style[key] = transform;\n      }\n      if (!this.lastRenderedProgress || this.lastRenderedProgress | 0 !== this.progress | 0) {\n        el.children[0].setAttribute('data-progress-text', \"\" + (this.progress | 0) + \"%\");\n        if (this.progress >= 100) {\n          progressStr = '99';\n        } else {\n          progressStr = this.progress < 10 ? \"0\" : \"\";\n          progressStr += this.progress | 0;\n        }\n        el.children[0].setAttribute('data-progress', \"\" + progressStr);\n      }\n      return this.lastRenderedProgress = this.progress;\n    };\n\n    Bar.prototype.done = function() {\n      return this.progress >= 100;\n    };\n\n    return Bar;\n\n  })();\n\n  Events = (function() {\n    function Events() {\n      this.bindings = {};\n    }\n\n    Events.prototype.trigger = function(name, val) {\n      var binding, _j, _len1, _ref2, _results;\n      if (this.bindings[name] != null) {\n        _ref2 = this.bindings[name];\n        _results = [];\n        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n          binding = _ref2[_j];\n          _results.push(binding.call(this, val));\n        }\n        return _results;\n      }\n    };\n\n    Events.prototype.on = function(name, fn) {\n      var _base;\n      if ((_base = this.bindings)[name] == null) {\n        _base[name] = [];\n      }\n      return this.bindings[name].push(fn);\n    };\n\n    return Events;\n\n  })();\n\n  _XMLHttpRequest = window.XMLHttpRequest;\n\n  _XDomainRequest = window.XDomainRequest;\n\n  _WebSocket = window.WebSocket;\n\n  extendNative = function(to, from) {\n    var e, key, _results;\n    _results = [];\n    for (key in from.prototype) {\n      try {\n        if ((to[key] == null) && typeof from[key] !== 'function') {\n          if (typeof Object.defineProperty === 'function') {\n            _results.push(Object.defineProperty(to, key, {\n              get: function() {\n                return from.prototype[key];\n              },\n              configurable: true,\n              enumerable: true\n            }));\n          } else {\n            _results.push(to[key] = from.prototype[key]);\n          }\n        } else {\n          _results.push(void 0);\n        }\n      } catch (_error) {\n        e = _error;\n      }\n    }\n    return _results;\n  };\n\n  ignoreStack = [];\n\n  Pace.ignore = function() {\n    var args, fn, ret;\n    fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    ignoreStack.unshift('ignore');\n    ret = fn.apply(null, args);\n    ignoreStack.shift();\n    return ret;\n  };\n\n  Pace.track = function() {\n    var args, fn, ret;\n    fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    ignoreStack.unshift('track');\n    ret = fn.apply(null, args);\n    ignoreStack.shift();\n    return ret;\n  };\n\n  shouldTrack = function(method) {\n    var _ref2;\n    if (method == null) {\n      method = 'GET';\n    }\n    if (ignoreStack[0] === 'track') {\n      return 'force';\n    }\n    if (!ignoreStack.length && options.ajax) {\n      if (method === 'socket' && options.ajax.trackWebSockets) {\n        return true;\n      } else if (_ref2 = method.toUpperCase(), __indexOf.call(options.ajax.trackMethods, _ref2) >= 0) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  RequestIntercept = (function(_super) {\n    __extends(RequestIntercept, _super);\n\n    function RequestIntercept() {\n      var monitorXHR,\n        _this = this;\n      RequestIntercept.__super__.constructor.apply(this, arguments);\n      monitorXHR = function(req) {\n        var _open;\n        _open = req.open;\n        return req.open = function(type, url, async) {\n          if (shouldTrack(type)) {\n            _this.trigger('request', {\n              type: type,\n              url: url,\n              request: req\n            });\n          }\n          return _open.apply(req, arguments);\n        };\n      };\n      window.XMLHttpRequest = function(flags) {\n        var req;\n        req = new _XMLHttpRequest(flags);\n        monitorXHR(req);\n        return req;\n      };\n      try {\n        extendNative(window.XMLHttpRequest, _XMLHttpRequest);\n      } catch (_error) {}\n      if (_XDomainRequest != null) {\n        window.XDomainRequest = function() {\n          var req;\n          req = new _XDomainRequest;\n          monitorXHR(req);\n          return req;\n        };\n        try {\n          extendNative(window.XDomainRequest, _XDomainRequest);\n        } catch (_error) {}\n      }\n      if ((_WebSocket != null) && options.ajax.trackWebSockets) {\n        window.WebSocket = function(url, protocols) {\n          var req;\n          if (protocols != null) {\n            req = new _WebSocket(url, protocols);\n          } else {\n            req = new _WebSocket(url);\n          }\n          if (shouldTrack('socket')) {\n            _this.trigger('request', {\n              type: 'socket',\n              url: url,\n              protocols: protocols,\n              request: req\n            });\n          }\n          return req;\n        };\n        try {\n          extendNative(window.WebSocket, _WebSocket);\n        } catch (_error) {}\n      }\n    }\n\n    return RequestIntercept;\n\n  })(Events);\n\n  _intercept = null;\n\n  getIntercept = function() {\n    if (_intercept == null) {\n      _intercept = new RequestIntercept;\n    }\n    return _intercept;\n  };\n\n  shouldIgnoreURL = function(url) {\n    var pattern, _j, _len1, _ref2;\n    _ref2 = options.ajax.ignoreURLs;\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n      pattern = _ref2[_j];\n      if (typeof pattern === 'string') {\n        if (url.indexOf(pattern) !== -1) {\n          return true;\n        }\n      } else {\n        if (pattern.test(url)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  getIntercept().on('request', function(_arg) {\n    var after, args, request, type, url;\n    type = _arg.type, request = _arg.request, url = _arg.url;\n    if (shouldIgnoreURL(url)) {\n      return;\n    }\n    if (!Pace.running && (options.restartOnRequestAfter !== false || shouldTrack(type) === 'force')) {\n      args = arguments;\n      after = options.restartOnRequestAfter || 0;\n      if (typeof after === 'boolean') {\n        after = 0;\n      }\n      return setTimeout(function() {\n        var stillActive, _j, _len1, _ref2, _ref3, _results;\n        if (type === 'socket') {\n          stillActive = request.readyState < 2;\n        } else {\n          stillActive = (0 < (_ref2 = request.readyState) && _ref2 < 4);\n        }\n        if (stillActive) {\n          Pace.restart();\n          _ref3 = Pace.sources;\n          _results = [];\n          for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n            source = _ref3[_j];\n            if (source instanceof AjaxMonitor) {\n              source.watch.apply(source, args);\n              break;\n            } else {\n              _results.push(void 0);\n            }\n          }\n          return _results;\n        }\n      }, after);\n    }\n  });\n\n  AjaxMonitor = (function() {\n    function AjaxMonitor() {\n      var _this = this;\n      this.elements = [];\n      getIntercept().on('request', function() {\n        return _this.watch.apply(_this, arguments);\n      });\n    }\n\n    AjaxMonitor.prototype.watch = function(_arg) {\n      var request, tracker, type, url;\n      type = _arg.type, request = _arg.request, url = _arg.url;\n      if (shouldIgnoreURL(url)) {\n        return;\n      }\n      if (type === 'socket') {\n        tracker = new SocketRequestTracker(request);\n      } else {\n        tracker = new XHRRequestTracker(request);\n      }\n      return this.elements.push(tracker);\n    };\n\n    return AjaxMonitor;\n\n  })();\n\n  XHRRequestTracker = (function() {\n    function XHRRequestTracker(request) {\n      var event, size, _j, _len1, _onreadystatechange, _ref2,\n        _this = this;\n      this.progress = 0;\n      if (window.ProgressEvent != null) {\n        size = null;\n        request.addEventListener('progress', function(evt) {\n          if (evt.lengthComputable) {\n            return _this.progress = 100 * evt.loaded / evt.total;\n          } else {\n            return _this.progress = _this.progress + (100 - _this.progress) / 2;\n          }\n        }, false);\n        _ref2 = ['load', 'abort', 'timeout', 'error'];\n        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n          event = _ref2[_j];\n          request.addEventListener(event, function() {\n            return _this.progress = 100;\n          }, false);\n        }\n      } else {\n        _onreadystatechange = request.onreadystatechange;\n        request.onreadystatechange = function() {\n          var _ref3;\n          if ((_ref3 = request.readyState) === 0 || _ref3 === 4) {\n            _this.progress = 100;\n          } else if (request.readyState === 3) {\n            _this.progress = 50;\n          }\n          return typeof _onreadystatechange === \"function\" ? _onreadystatechange.apply(null, arguments) : void 0;\n        };\n      }\n    }\n\n    return XHRRequestTracker;\n\n  })();\n\n  SocketRequestTracker = (function() {\n    function SocketRequestTracker(request) {\n      var event, _j, _len1, _ref2,\n        _this = this;\n      this.progress = 0;\n      _ref2 = ['error', 'open'];\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n        event = _ref2[_j];\n        request.addEventListener(event, function() {\n          return _this.progress = 100;\n        }, false);\n      }\n    }\n\n    return SocketRequestTracker;\n\n  })();\n\n  ElementMonitor = (function() {\n    function ElementMonitor(options) {\n      var selector, _j, _len1, _ref2;\n      if (options == null) {\n        options = {};\n      }\n      this.elements = [];\n      if (options.selectors == null) {\n        options.selectors = [];\n      }\n      _ref2 = options.selectors;\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n        selector = _ref2[_j];\n        this.elements.push(new ElementTracker(selector));\n      }\n    }\n\n    return ElementMonitor;\n\n  })();\n\n  ElementTracker = (function() {\n    function ElementTracker(selector) {\n      this.selector = selector;\n      this.progress = 0;\n      this.check();\n    }\n\n    ElementTracker.prototype.check = function() {\n      var _this = this;\n      if (document.querySelector(this.selector)) {\n        return this.done();\n      } else {\n        return setTimeout((function() {\n          return _this.check();\n        }), options.elements.checkInterval);\n      }\n    };\n\n    ElementTracker.prototype.done = function() {\n      return this.progress = 100;\n    };\n\n    return ElementTracker;\n\n  })();\n\n  DocumentMonitor = (function() {\n    DocumentMonitor.prototype.states = {\n      loading: 0,\n      interactive: 50,\n      complete: 100\n    };\n\n    function DocumentMonitor() {\n      var _onreadystatechange, _ref2,\n        _this = this;\n      this.progress = (_ref2 = this.states[document.readyState]) != null ? _ref2 : 100;\n      _onreadystatechange = document.onreadystatechange;\n      document.onreadystatechange = function() {\n        if (_this.states[document.readyState] != null) {\n          _this.progress = _this.states[document.readyState];\n        }\n        return typeof _onreadystatechange === \"function\" ? _onreadystatechange.apply(null, arguments) : void 0;\n      };\n    }\n\n    return DocumentMonitor;\n\n  })();\n\n  EventLagMonitor = (function() {\n    function EventLagMonitor() {\n      var avg, interval, last, points, samples,\n        _this = this;\n      this.progress = 0;\n      avg = 0;\n      samples = [];\n      points = 0;\n      last = now();\n      interval = setInterval(function() {\n        var diff;\n        diff = now() - last - 50;\n        last = now();\n        samples.push(diff);\n        if (samples.length > options.eventLag.sampleCount) {\n          samples.shift();\n        }\n        avg = avgAmplitude(samples);\n        if (++points >= options.eventLag.minSamples && avg < options.eventLag.lagThreshold) {\n          _this.progress = 100;\n          return clearInterval(interval);\n        } else {\n          return _this.progress = 100 * (3 / (avg + 3));\n        }\n      }, 50);\n    }\n\n    return EventLagMonitor;\n\n  })();\n\n  Scaler = (function() {\n    function Scaler(source) {\n      this.source = source;\n      this.last = this.sinceLastUpdate = 0;\n      this.rate = options.initialRate;\n      this.catchup = 0;\n      this.progress = this.lastProgress = 0;\n      if (this.source != null) {\n        this.progress = result(this.source, 'progress');\n      }\n    }\n\n    Scaler.prototype.tick = function(frameTime, val) {\n      var scaling;\n      if (val == null) {\n        val = result(this.source, 'progress');\n      }\n      if (val >= 100) {\n        this.done = true;\n      }\n      if (val === this.last) {\n        this.sinceLastUpdate += frameTime;\n      } else {\n        if (this.sinceLastUpdate) {\n          this.rate = (val - this.last) / this.sinceLastUpdate;\n        }\n        this.catchup = (val - this.progress) / options.catchupTime;\n        this.sinceLastUpdate = 0;\n        this.last = val;\n      }\n      if (val > this.progress) {\n        this.progress += this.catchup * frameTime;\n      }\n      scaling = 1 - Math.pow(this.progress / 100, options.easeFactor);\n      this.progress += scaling * this.rate * frameTime;\n      this.progress = Math.min(this.lastProgress + options.maxProgressPerFrame, this.progress);\n      this.progress = Math.max(0, this.progress);\n      this.progress = Math.min(100, this.progress);\n      this.lastProgress = this.progress;\n      return this.progress;\n    };\n\n    return Scaler;\n\n  })();\n\n  sources = null;\n\n  scalers = null;\n\n  bar = null;\n\n  uniScaler = null;\n\n  animation = null;\n\n  cancelAnimation = null;\n\n  Pace.running = false;\n\n  handlePushState = function() {\n    if (options.restartOnPushState) {\n      return Pace.restart();\n    }\n  };\n\n  if (window.history.pushState != null) {\n    _pushState = window.history.pushState;\n    window.history.pushState = function() {\n      handlePushState();\n      return _pushState.apply(window.history, arguments);\n    };\n  }\n\n  if (window.history.replaceState != null) {\n    _replaceState = window.history.replaceState;\n    window.history.replaceState = function() {\n      handlePushState();\n      return _replaceState.apply(window.history, arguments);\n    };\n  }\n\n  SOURCE_KEYS = {\n    ajax: AjaxMonitor,\n    elements: ElementMonitor,\n    document: DocumentMonitor,\n    eventLag: EventLagMonitor\n  };\n\n  (init = function() {\n    var type, _j, _k, _len1, _len2, _ref2, _ref3, _ref4;\n    Pace.sources = sources = [];\n    _ref2 = ['ajax', 'elements', 'document', 'eventLag'];\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\n      type = _ref2[_j];\n      if (options[type] !== false) {\n        sources.push(new SOURCE_KEYS[type](options[type]));\n      }\n    }\n    _ref4 = (_ref3 = options.extraSources) != null ? _ref3 : [];\n    for (_k = 0, _len2 = _ref4.length; _k < _len2; _k++) {\n      source = _ref4[_k];\n      sources.push(new source(options));\n    }\n    Pace.bar = bar = new Bar;\n    scalers = [];\n    return uniScaler = new Scaler;\n  })();\n\n  Pace.stop = function() {\n    Pace.trigger('stop');\n    Pace.running = false;\n    bar.destroy();\n    cancelAnimation = true;\n    if (animation != null) {\n      if (typeof cancelAnimationFrame === \"function\") {\n        cancelAnimationFrame(animation);\n      }\n      animation = null;\n    }\n    return init();\n  };\n\n  Pace.restart = function() {\n    Pace.trigger('restart');\n    Pace.stop();\n    return Pace.start();\n  };\n\n  Pace.go = function() {\n    var start;\n    Pace.running = true;\n    bar.render();\n    start = now();\n    cancelAnimation = false;\n    return animation = runAnimation(function(frameTime, enqueueNextFrame) {\n      var avg, count, done, element, elements, i, j, remaining, scaler, scalerList, sum, _j, _k, _len1, _len2, _ref2;\n      remaining = 100 - bar.progress;\n      count = sum = 0;\n      done = true;\n      for (i = _j = 0, _len1 = sources.length; _j < _len1; i = ++_j) {\n        source = sources[i];\n        scalerList = scalers[i] != null ? scalers[i] : scalers[i] = [];\n        elements = (_ref2 = source.elements) != null ? _ref2 : [source];\n        for (j = _k = 0, _len2 = elements.length; _k < _len2; j = ++_k) {\n          element = elements[j];\n          scaler = scalerList[j] != null ? scalerList[j] : scalerList[j] = new Scaler(element);\n          done &= scaler.done;\n          if (scaler.done) {\n            continue;\n          }\n          count++;\n          sum += scaler.tick(frameTime);\n        }\n      }\n      avg = sum / count;\n      bar.update(uniScaler.tick(frameTime, avg));\n      if (bar.done() || done || cancelAnimation) {\n        bar.update(100);\n        Pace.trigger('done');\n        return setTimeout(function() {\n          bar.finish();\n          Pace.running = false;\n          return Pace.trigger('hide');\n        }, Math.max(options.ghostTime, Math.max(options.minTime - (now() - start), 0)));\n      } else {\n        return enqueueNextFrame();\n      }\n    });\n  };\n\n  Pace.start = function(_options) {\n    extend(options, _options);\n    Pace.running = true;\n    try {\n      bar.render();\n    } catch (_error) {\n      NoTargetError = _error;\n    }\n    if (!document.querySelector('.pace')) {\n      return setTimeout(Pace.start, 50);\n    } else {\n      Pace.trigger('start');\n      return Pace.go();\n    }\n  };\n\n  if (typeof define === 'function' && define.amd) {\n    define(['pace'], function() {\n      return Pace;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = Pace;\n  } else {\n    if (options.startOnPageLoad) {\n      Pace.start();\n    }\n  }\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}
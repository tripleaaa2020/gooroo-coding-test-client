{"ast":null,"code":"var _jsxFileName = \"/Users/mac/react/gooroo-coding-test-client/src/display/sections/ListSection.js\";\nimport React, { useState, useEffect } from 'react';\nimport jwt from 'jsonwebtoken';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { SET_LIBRARY_BOOKS } from '../../store/actions/LibraryActions';\nimport { SET_MY_BOOKS } from '../../store/actions/MyBooksActions';\nimport { getAllBooks } from '../../services/Books';\nimport Book from '../components/book/BookComponent';\nimport './ListSection.scss';\n\nconst ListSection = props => {\n  console.log(\"ListSection props => \", props);\n  const authToken = localStorage.getItem(\"authToken\");\n  const userPayload = jwt.decode(authToken);\n  const booksListReducer = useSelector(state => props.from === \"Library\" ? state.lib : state.mybook);\n  const {\n    books,\n    activeCategories,\n    searchValue\n  } = booksListReducer;\n  const dispatch = useDispatch();\n  console.log(\"books => \", books);\n\n  const setBooks = books => {\n    let type = props.from === \"Library\" ? SET_LIBRARY_BOOKS : SET_MY_BOOKS;\n    dispatch({\n      type,\n      books\n    });\n  };\n\n  useEffect(() => {\n    getAllBooks(userPayload.contributorID, activeCategories, searchValue, props.from).then(response => {\n      if (response.data) {\n        if (response.data.rows) setBooks(response.data.rows);\n        localStorage.setItem('authToken', response.data.authToken);\n      } else {\n        if (response.msg.name === \"TokenExpiredError\") {\n          localStorage.removeItem('authToken');\n          props.history.push('/auth/login');\n        }\n      }\n    });\n  }, [dispatch, activeCategories, searchValue, props.location.state]);\n  return React.createElement(\"div\", {\n    style: {\n      backgroundColor: 'transparent'\n    },\n    className: \"pt-3 mt-3 px-3 rounded\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row books-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, books.map((book, i) => {\n    return React.createElement(\"div\", {\n      className: \"col-6 col-lg-3\",\n      key: book.bookID,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(Book, Object.assign({}, props, {\n      isAddBook: false,\n      bookID: book.bookID,\n      title: book.title,\n      author: book.author,\n      publisher: book.publisher,\n      categoryID: book.categoryID,\n      contributorID: book.contributorID,\n      contributorName: book.contributors.contributorName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }))));\n  }), props.from === \"MyBooks\" && React.createElement(\"div\", {\n    className: \"col-6 col-lg-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"/my-books/add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Book, Object.assign({}, props, {\n    isAddBook: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }))))));\n};\n\nexport default ListSection;","map":{"version":3,"sources":["/Users/mac/react/gooroo-coding-test-client/src/display/sections/ListSection.js"],"names":["React","useState","useEffect","jwt","useSelector","useDispatch","SET_LIBRARY_BOOKS","SET_MY_BOOKS","getAllBooks","Book","ListSection","props","console","log","authToken","localStorage","getItem","userPayload","decode","booksListReducer","state","from","lib","mybook","books","activeCategories","searchValue","dispatch","setBooks","type","contributorID","then","response","data","rows","setItem","msg","name","removeItem","history","push","location","backgroundColor","map","book","i","bookID","title","author","publisher","categoryID","contributors","contributorName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport jwt from 'jsonwebtoken';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { SET_LIBRARY_BOOKS } from '../../store/actions/LibraryActions';\nimport { SET_MY_BOOKS } from '../../store/actions/MyBooksActions';\nimport { getAllBooks } from '../../services/Books';\n\nimport Book from '../components/book/BookComponent';\nimport './ListSection.scss';\n\nconst ListSection = props => {\n\n    console.log(\"ListSection props => \", props);\n\n    const authToken = localStorage.getItem(\"authToken\");\n    const userPayload = jwt.decode(authToken);\n\n    const booksListReducer = useSelector(state => (props.from === \"Library\") ? state.lib : state.mybook);\n    const { books, activeCategories, searchValue } = booksListReducer;\n    const dispatch = useDispatch();\n\n    console.log(\"books => \", books);\n\n    const setBooks = (books) => {\n        let type = props.from === \"Library\" ? SET_LIBRARY_BOOKS : SET_MY_BOOKS;\n        dispatch({ type, books })\n    }\n\n    useEffect(() => {\n        getAllBooks(userPayload.contributorID, activeCategories, searchValue, props.from)\n            .then(response => {\n                if (response.data) {\n                    if (response.data.rows)\n                        setBooks(response.data.rows)\n                    localStorage.setItem('authToken', response.data.authToken);\n                }\n                else {\n                    if (response.msg.name === \"TokenExpiredError\") {\n                        localStorage.removeItem('authToken')\n                        props.history.push('/auth/login')\n                    }\n                }\n            });\n    }, [dispatch, activeCategories, searchValue, props.location.state])\n\n    return (\n        <div style={{ backgroundColor: 'transparent' }} className=\"pt-3 mt-3 px-3 rounded\">\n            <div className=\"row books-list\">\n                {books.map((book, i) => {\n                    return (\n                        <div className={\"col-6 col-lg-3\"} key={book.bookID}>\n                            <a href={\"#\"}>\n                                <Book\n                                    {...props}\n                                    isAddBook={false}\n                                    bookID={book.bookID}\n                                    title={book.title}\n                                    author={book.author}\n                                    publisher={book.publisher}\n                                    categoryID={book.categoryID}\n                                    contributorID={book.contributorID}\n                                    contributorName={book.contributors.contributorName}\n                                />\n                            </a>\n                        </div>\n                    );\n                })}\n                {props.from === \"MyBooks\" &&\n                    <div className={\"col-6 col-lg-3\"}>\n                        <a href={\"/my-books/add\"}>\n                            <Book {...props} isAddBook={true} />\n                        </a>\n                    </div>\n                }\n            </div>\n        </div>\n    )\n}\nexport default ListSection"]},"metadata":{},"sourceType":"module"}